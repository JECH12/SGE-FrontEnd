import{a as T,b as s,c as M,d as q,e as O,f as A,g as L,h as V,i as w,j as G,k as P,l as R,m as k}from"./chunk-SESOCXVE.js";import{a as x,b as D}from"./chunk-7GRM2P6J.js";import{a as F}from"./chunk-O7LX5Q4J.js";import{$ as C,B as u,F as p,H as l,J as o,K as e,L as c,N as v,O as g,P as r,Q as f,R as y,T as E,aa as b,da as h,ha as S,ja as _,ka as I,ma as N,q as d,y as a}from"./chunk-Z5UX6VDY.js";var j=()=>["/employees"];function B(t,i){t&1&&(o(0,"div",20),r(1," El nombre es requerido (m\xEDnimo 3 caracteres). "),e())}function z(t,i){t&1&&(o(0,"div",20),r(1," La fecha es requerida. "),e())}function H(t,i){t&1&&(o(0,"div",20),r(1," Debe ingresar un salario v\xE1lido. "),e())}function J(t,i){if(t&1&&(o(0,"option",21),r(1),e()),t&2){let m=i.$implicit;l("value",m.id),a(),f(m.name)}}function K(t,i){t&1&&(o(0,"div",20),r(1," El departamento es requerido. "),e())}function Q(t,i){if(t&1&&(o(0,"option",21),r(1),e()),t&2){let m=i.$implicit;l("value",m.id),a(),f(m.name)}}function U(t,i){t&1&&(o(0,"div",20),r(1," La posici\xF3n es requerida. "),e())}function W(t,i){if(t&1&&(o(0,"div",22),r(1),e()),t&2){let m=g();a(),y(" ",m.errorMessage," ")}}function X(t,i){t&1&&(o(0,"span"),r(1,"Crear empleado"),e())}function Y(t,i){t&1&&(o(0,"span"),r(1,"Guardando..."),e())}var $=class t{route=d(S);fb=d(R);employeesService=d(F);departmentsService=d(x);positionsService=d(D);router=d(_);departments=[];positions=[];loading=!1;errorMessage="";form=this.fb.group({fullName:["",[s.required,s.minLength(3)]],hireDate:["",s.required],salary:[0,[s.required,s.min(1)]],departmentId:[null,s.required],positionId:[null,s.required]});ngOnInit(){let i=this.route.snapshot.data.data;this.departments=i.departments,this.positions=i.positions}loadDepartments(){this.departmentsService.getAll().subscribe(i=>{i.success&&(this.departments=i.data)})}loadPositions(){this.positionsService.getAll().subscribe(i=>{i.success&&(this.positions=i.data)})}submit(){if(this.form.invalid){this.form.markAllAsTouched();return}this.loading=!0,this.errorMessage="";let i={fullName:this.form.value.fullName,hireDate:this.form.value.hireDate,salary:Number(this.form.value.salary),departmentId:Number(this.form.value.departmentId),positionId:Number(this.form.value.positionId)};this.employeesService.create(i).subscribe({next:m=>{this.loading=!1,m.success?this.router.navigate(["/employees"]):this.errorMessage=m.message??"Error inesperado"},error:()=>{this.loading=!1,this.errorMessage="Error al crear empleado."}})}static \u0275fac=function(m){return new(m||t)};static \u0275cmp=u({type:t,selectors:[["app-create-employee"]],decls:43,vars:14,consts:[[1,"container","mt-5"],[1,"card","shadow-lg","p-4","border-0"],[1,"mb-4","text-primary"],[3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"form-label","fw-semibold"],["type","text","formControlName","fullName",1,"form-control","form-control-lg"],["class","text-danger mt-1",4,"ngIf"],["type","date","formControlName","hireDate",1,"form-control","form-control-lg"],["type","number","formControlName","salary",1,"form-control","form-control-lg"],["formControlName","departmentId",1,"form-select","form-select-lg"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"mb-4"],["formControlName","positionId",1,"form-select","form-select-lg"],["class","alert alert-danger",4,"ngIf"],[1,"btn","btn-primary","btn-lg","w-100",3,"disabled"],[4,"ngIf"],[1,"mt-3"],[1,"btn","btn-outline-secondary","w-100",3,"routerLink"],[1,"text-danger","mt-1"],[3,"value"],[1,"alert","alert-danger"]],template:function(m,n){m&1&&(o(0,"div",0)(1,"div",1)(2,"h2",2),r(3,"Crear Nuevo Empleado"),e(),o(4,"form",3),v("ngSubmit",function(){return n.submit()}),o(5,"div",4)(6,"label",5),r(7,"Nombre completo"),e(),c(8,"input",6),p(9,B,2,0,"div",7),e(),o(10,"div",4)(11,"label",5),r(12,"Fecha de contrataci\xF3n"),e(),c(13,"input",8),p(14,z,2,0,"div",7),e(),o(15,"div",4)(16,"label",5),r(17,"Salario"),e(),c(18,"input",9),p(19,H,2,0,"div",7),e(),o(20,"div",4)(21,"label",5),r(22,"Departamento"),e(),o(23,"select",10)(24,"option",11),r(25,"Seleccione..."),e(),p(26,J,2,2,"option",12),e(),p(27,K,2,0,"div",7),e(),o(28,"div",13)(29,"label",5),r(30,"Cargo"),e(),o(31,"select",14)(32,"option",11),r(33,"Seleccione..."),e(),p(34,Q,2,2,"option",12),e(),p(35,U,2,0,"div",7),e(),p(36,W,2,1,"div",15),o(37,"button",16),p(38,X,2,0,"span",17)(39,Y,2,0,"span",17),e()(),o(40,"div",18)(41,"button",19),r(42," \u2190 Volver al listado "),e()()()()),m&2&&(a(4),l("formGroup",n.form),a(5),l("ngIf",n.form.controls.fullName.touched&&n.form.controls.fullName.invalid),a(5),l("ngIf",n.form.controls.hireDate.touched&&n.form.controls.hireDate.invalid),a(5),l("ngIf",n.form.controls.salary.touched&&n.form.controls.salary.invalid),a(7),l("ngForOf",n.departments),a(),l("ngIf",n.form.controls.departmentId.touched&&n.form.controls.departmentId.invalid),a(7),l("ngForOf",n.positions),a(),l("ngIf",n.form.controls.positionId.touched&&n.form.controls.positionId.invalid),a(),l("ngIf",n.errorMessage),a(),l("disabled",n.loading),a(),l("ngIf",!n.loading),a(),l("ngIf",n.loading),a(2),l("routerLink",E(13,j)))},dependencies:[h,C,b,k,O,G,P,T,A,w,M,q,L,V,N,I],encapsulation:2})};export{$ as CreateEmployeeComponent};
